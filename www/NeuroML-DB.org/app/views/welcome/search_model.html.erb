<div id="main">
  <!-- wrapper-main -->
  <div class="wrapper">

    <!-- content -->
    <div id="content">

      <!-- title -->
      <div id="page-title">
        <h2 class="title">Search NeuroML Models</h2>
      </div>
      <!-- ENDS title -->
      <a class="various fancybox"></a>
      <div id="searchbox">
        <form id="myForm" onsubmit="return retrieve_results()">

          <input type="text" id="keyword_search_box" onclick="clearWatermark(this);" class="keyword_search_box poshytip" title="Search results will be displayed below" size="60" value="Enter search keywords here (e.g. cerebellum)" />
          <input type="submit" value="Search" />
          <input type="button" value="Advanced Search" onclick="togglesearch();" style="display:none;""/>

          <div id="advanced_search" style="display:none;">
            <fieldset>
              <legend>Advanced Search</legend>
              <label for="all_of_these">All of these words: &nbsp;&nbsp;&nbsp;</label>
              <input type="text" id="all_of_these"  name="all_of_these" size="30" />

              <br />
              <label for="this_exact_phrase">This exact phrase: &nbsp;&nbsp;&nbsp;</label>
              <input type="text" id="this_exact_phrase"  name="this_exact_phrase" size="30" />

              <br />
              <label for="any_of_these_words">Any of these words: &nbsp;</label>
              <input type="text" id="any_of_these_words" name="any_of_these_words" size="30" />

              <br />
              <label for="none_of_these_words">None of these words:</label>
              <input  type="text" id="none_of_these_words" name="none_of_these_words" size="30" />
            </fieldset>
          </div>
        </form>
        <div style="color: gray; font-size: 90%; text-align: center;">Hint: Use quotes for exact matches (e.g. "layer 2/3" bipolar cell irregular burst)</div>
      </div>

      <div id="search_container" style="display: none;">
        <div id="keyword_search_results">
          <div id="keyword_header">
            <h2>Keyword Search Results</h2>
          </div>
          <div id="keyword_results">
          </div>
        </div>
        <!--
        <br />
        <hr/><br />
        -->
        <div id="ontology_search_results">
          <div id="ontology_header">
            <h2>Ontology Based Recommendations</h2>
          </div>
          <div id="ontology_results">
          </div>
        </div>

        <div id="ontology_search_results_error_template" style="display: none;">
          <!--Defines template for ontology results errors-->
          <p>Sorry, there was a problem getting the results.</p>
          <p><b>[statusText]</b> while calling:</p>
          <p><a href="[url]" target="_blank">[url]</a></p>
        </div>

      </div>



      <div id="keyword_model"></div>


      <div class="clear"></div>
      <!-- ENDS project column (right) -->


    </div>
    <!-- ENDS content -->

  </div>
  <!-- ENDS wrapper-main -->
</div>
<script>jQuery.noConflict();</script>

<script type="text/javascript">
    var x=0;
    function togglesearch()
    {
        if(x==1){
            new Effect.SlideUp('advanced_search');
            x=0;
            document.getElementById('all_of_these').value="";
            document.getElementById('this_exact_phrase').value="";
            document.getElementById('any_of_these_words').value="";
            document.getElementById('none_of_these_words').value="";
            document.getElementById('keyword_search_box').disabled=false;
        }
        else{
            document.getElementById('keyword_search_box').value="";
            document.getElementById('keyword_search_box').disabled=true;

            new Effect.SlideDown('advanced_search');
            x=1;

        }
    }

    function clearWatermark(e)
    {
        if(e.value == "Enter search keywords here (e.g. cerebellum)")
            e.value = "";
    }

    function retrieve_results()
    {
        jQuery("#search_container").show();

        var input_text=document.getElementById('keyword_search_box').value;
        var all=document.getElementById('all_of_these').value;
        var exact=document.getElementById('this_exact_phrase').value;
        var any=document.getElementById('any_of_these_words').value;
        var none=document.getElementById('none_of_these_words').value;
        new Ajax.Request("search_process"+"?q="+input_text+"&all="+all+"&exact="+exact+"&any="+any+"&none="+none,{onSuccess:function(request){
            document.getElementById('keyword_results').innerHTML="";
            $('keyword_results').update(request.responseText);




        },
            onLoading:function(){
                var key=document.getElementById("keyword_results");
                key.innerHTML=" ";
                var image1= new Image();
                image1.src="../images/loading.gif"
                image1.style.height="25px";
                image1.style.width="25px";
                image1.style.marginLeft="185px";
                image1.style.marginTop="100px";
                key.appendChild(image1);




            }
        });



        new Ajax.Request("search_python"+"?q="+input_text,{onSuccess:function(request){
            document.getElementById('ontology_results').innerHTML="";
            $('ontology_results').update(request.responseText);
        },

            onFailure:function(e)
            {
                //Get template text from a hidden div element
                //Replace template tokens with values
                var errorHtml = $('ontology_search_results_error_template')
                        .innerHTML
                        .replace("[statusText]", e.statusText)
                        .split("[url]").join(e.request.url); //replace all

                //Show in the ontology results column
                $('ontology_results').update(errorHtml);
            },

            onLoading:function(){
                var ont=document.getElementById("ontology_results");
                ont.innerHTML=" ";
                var image= new Image();
                image.src="../images/loading.gif"
                image.style.height="25px";
                image.style.width="25px";
                image.style.marginLeft="195px";
                image.style.marginTop="100px";
                ont.appendChild(image);
            }
        });






        return false;

    }
    function modelinfo(model)
    {
        var model_id=model.innerHTML;
//alert("the model id is:"+model_id);
        new Ajax.Request("model_info"+"?model_id="+model_id,{onSuccess:function(request){
            document.getElementById('keyword_model').innerHTML="";



            $('keyword_model').update(request.responseText);


        },

            onLoading:function(){
                var ont=document.getElementById("keyword_model");
                ont.innerHTML=" "
                ont.style.display="block";
                var image= new Image();
                image.src="../images/loading.gif"
                image.style.height="25px";
                image.style.width="25px";
                image.style.marginLeft="195px";
                image.style.marginTop="100px";
                ont.appendChild(image);
            }
        });

        return false;
    }




    function closemodel(){

        new Effect.Fade('keyword_model');

    }



</script>
             




