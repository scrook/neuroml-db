<script type="text/javascript" charset="utf-8">

counterpub = 0;
counterref=0;
countercont=0;
        function addFields(id) {
            // Get the main Div in which all the other divs will be added
            var mainContainer = document.getElementById(id);
            // Create a new div for holding text and button input elements
            var newDiv = document.createElement('div');
            // Create a new text input
            var newText = document.createElement('input');
            var newdropd = document.createElement('select');
            newText.type = "input"; 
            newText.maxlength = "300"; 
            newText.maxlimit = "300"; 
            newText.size = "30"; 
            newText.value = "";
            if(id == "pubFields")
            newText.value = counterpub;
            else if(id == "contFields"){
            newText.value = countercont;
                //newdropd.size = "1";
                //newdropd.setAttribute('id', 'dropdownelement');
                //newDiv.appendChild(newdropd);
                //newdropd = document.getElementById('dropdownelement');
                //add first value to the dropdown
                 var _opt = document.createElement('option');
                _opt.text = "Select Role";
                _opt.value = "";
                newdropd.add(_opt); 
                var _opt = document.createElement('option');
                _opt.text = "Author";
                _opt.value = "1";
                newdropd.add(_opt); 
                var _opt = document.createElement('option');
                _opt.text = 'Translator';
                _opt.value = '2';
                newdropd.add(_opt);
                var _opt = document.createElement('option');
                _opt.text = 'Both';
                _opt.value = '3';
                newdropd.add(_opt);
}

            else
            newText.value=counterref;
                newText.value = "";
            // Create a new button input
            var newDelButton = document.createElement('input');
            newDelButton.type = "button";
            newDelButton.value = "-";
 // Append new text input to the newDiv
            newDiv.appendChild(newText);
                if(id == "contFields")  newDiv.appendChild(newdropd);
            // Append new button input to the newDiv
            newDiv.appendChild(newDelButton);
            // Append newDiv input to the mainContainer div
            mainContainer.appendChild(newDiv);
            if(id == "pubFields")
            counterpub++;
            else if(id == "contFields")
            countercont++;
            else
            counterref++;
            // Add a handler to button for deleting the newDiv from the mainContainer
            newDelButton.onclick = function() {
                    mainContainer.removeChild(newDiv);
            }
        }
</script>




<div id="main">
                                <!-- wrapper-main -->
                                <div class="wrapper">

                                        <!-- content -->
                                        <div id="content">


<!--
            <ul class="filter">
                                                <li></li>
                                                <li ><a href="/model_submit" >Submit NeuroML Models</a></li>
                                                <li class="active"><a href="/search_model" >Search NeuroML Models</a></li>

                                        </ul>

 
-->
<div id="page-content">
						
							<!-- TABS -->
							<!-- the tabs -->
							<ul class="tabs">
								<li><a href="#"><span>Submit NeuroML Models</span></a></li>
								<li><a href="#"><span>Search NeuroML Models</span></a></li>
								
							</ul>
							<div class="panes">

<div>
<br />
<h3>Submit NeuroML Models</h3>


<p>
                        * Indicates required field</p>
                <p>
<%= form_tag("submission",:id => "anID", :multipart => "true" , :method => "post") do %>

<table class="news_table">
<!-- <table class="collapsible alt-row-colors sm-padding" width="100%"> -->
<tr>
<td> First Name* :
</td><td> <input maxlength="120" name="fname" size="30" type="text" class="poshytip" title="Enter your first name" />
</td></tr>

<tr>
<td> Middle Name :
</td><td> <input maxlength="120" name="mname" size="30" type="text" class="poshytip" title="Enter your middle name" />
</td></tr>

<tr>
<td>Last Name* :
</td><td> <input maxlength="120" name="lname" size="30" type="text" class="poshytip" title="Enter your last name" />
</td></tr>

<tr>
<td> Email Address* :
</td><td> <input maxlength="50" name="email" size="30" type="email" class="poshytip" title="Enter your email id" />
</td></tr>

<tr>
<td> Institution :
</td><td> <input maxlength="300" name="instname" size="30" type="text" class="poshytip" title="Enter name of the institution" />
</td></tr>

<tr>
<td> Model Name* :
</td><td> <input maxlength="120" name="model" size="30" type="text" class="poshytip" title="Enter model name" />
</td></tr>

<tr>
<td> Implementor of the Model :
</td><td>
<div id="contFields">
<input maxlength="120" name="model_contributor" size="30" type="text" class="poshytip" title="Enter the Implementor(s) of the model" />
<select name="cont_select">
  <option value="" Selected="selected">Select a Role</option>
  <option value="1">Author</option>
  <option value="2">Translator</option>
  <option value="3">Both</option>
</select>
<input type="button" value="+" onclick="addFields('contFields');" />
</div>
</td>
</tr>

<!--<div id="pubFields">-->
<tr>
<td> Model Publication :
</td><td><div id="pubFields"> <input maxlength="300" name="pubmed" size="30" type="text" class="poshytip" title="Enter model publication(s) or citations" />
<input type="button" value="+" onclick="addFields('pubFields');" />

</div>
</td>

</tr>
<!--</div>-->

<tr>
<td> References to the Model :
</td><td>

<div id="refFields"> <input maxlength="250" name="refrences" size="30" type="url" class="poshytip" title="Enter references to the model" />
<input type="button" value="+" onclick="addFields('refFields');" />

</div>


</td></tr>

<tr>
<td> Brief Description of the Model :
</td><td> <textarea cols="60" name="model_desc" rows="10" class="poshytip" title="Enter discription about the model"  ></textarea>
</td></tr>


<tr>
<td> Upload Model File :
</td>
<td><%= file_field_tag "file",:class=>'poshytip', :title => 'upload your model files here' %>
</td></tr>

<td> Select the keywords from NeuroLex for the Model :
</td><td>
<%= select_tag "access", options_from_collection_for_select(@cells, "ModelName", "ModelName"), :multiple => true%>
<!-- collection_select(:id,:MName,@cells,:SubmissionID,:ModelName, options ={:prompt => "-Select a category"}, :class =>"category")  -->
<select name="key_category">
  <option value="" Selected="selected">Select a Keyword Category</option>
  <option value="1">Modelling Terms</option>
  <option value="2">Biological Terms</option>
  <option value="3">Simulation Software Related</option>
</select>
</td>
<td>
<input type="button" onclick="addInput()" name="add" value="Add Keywords" />
</td>
</tr>

<tr>
<td> Other Keywords:
</td><td>
<input maxlength="300" name="keywords_model" size="30" type="text" class="poshytip" title="Enter the keywords" />
</td></tr>


<tr>
<td> Notes or Comments:
</td><td> <textarea cols="60" name="notes" rows="10" class="poshytip" title="Enter the comments"></textarea>
</td></tr></table>

                <p>
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <input name="reset" type="reset"/>&nbsp;&nbsp; <input name="save" type="button" value="Save" />&nbsp;&nbsp; <input name="Submit" type="submit" value="Submit Model" /></p>
<% end %>
<div class="clear"></div>



</div>

<div>
<br />
<h3>Search NeuroML Models</h3>
<br />

<a class="various fancybox"></a>
<div id="searchbox">
<form id="myForm" onsubmit="return retrieve_results()">
<label for="search_text">Enter keywords here2:</label>

<input type="text" id="keyword_search_box" class="keyword_search_box poshytip" title="Search results will be displayed below" size="30" />
<input type="submit" value="Search" />
<input type="button" value="Advanced Search" onclick="togglesearch();"/>

<div id="advanced_search" style="display:none;">
<fieldset>
<legend>Advanced Search</legend>
<label for="all_of_these">All of these words: &nbsp;&nbsp;&nbsp;</label>
<input type="text" id="all_of_these"  name="all_of_these" size="30" />

<br />
<label for="this_exact_phrase">This exact phrase: &nbsp;&nbsp;&nbsp;</label>
<input type="text" id="this_exact_phrase"  name="this_exact_phrase" size="30" />

<br />
<label for="any_of_these_words">Any of these words: &nbsp;</label>
<input type="text" id="any_of_these_words" name="any_of_these_words" size="30" />

<br />
<label for="none_of_these_words">None of these words:</label>
<input  type="text" id="none_of_these_words" name="none_of_these_words" size="30" />
</fieldset>
</div>
</form>
</div>

<div id="search_container">
 <div id="keyword_search_results">
  <div id="keyword_header">
<h2>Keyword Search Results</h2>
</div>
<div id="keyword_results">
</div>
 </div>

<br />
<hr/><br />

<div id="ontology_search_results">
<div id="ontology_header">
<h2>Ontology Based Recommendations</h2>
</div>
<div id="ontology_results">
</div>
 </div>

</div>





 <div class="clear"></div>












</div>



</div>




</div>

                                                <!-- ENDS project column (right) -->


                                        </div>
                                        <!-- ENDS content -->

                                </div>
                                <!-- ENDS wrapper-main -->
                        </div>
                        <!-- ENDS MAIN -->











<script type="text/javascript">
var x=0;
function togglesearch()
{
 if(x==1){
 new Effect.SlideUp('advanced_search');
 x=0;
document.getElementById('all_of_these').value="";
document.getElementById('this_exact_phrase').value="";
document.getElementById('any_of_these_words').value="";
document.getElementById('none_of_these_words').value="";
document.getElementById('keyword_search_box').disabled=false;
 }
 else{
document.getElementById('keyword_search_box').value="";
document.getElementById('keyword_search_box').disabled=true; 

 new Effect.SlideDown('advanced_search');
 x=1;

}
}


</script>




<script type="text/javascript" language="javascript">
function retrieve_results()
{
var input_text=document.getElementById('keyword_search_box').value;
var all=document.getElementById('all_of_these').value;
var exact=document.getElementById('this_exact_phrase').value;
var any=document.getElementById('any_of_these_words').value;
var none=document.getElementById('none_of_these_words').value;
new Ajax.Request("search_process"+"?q="+input_text+"&all="+all+"&exact="+exact+"&any="+any+"&none="+none,{onSuccess:function(request){
document.getElementById('keyword_results').innerHTML="";
$('keyword_results').update(request.responseText);




},
onLoading:function(){
var key=document.getElementById("keyword_results");
key.innerHTML=" ";
var image1= new Image();
image1.src="../images/loading.gif"
image1.style.height="25px";
image1.style.width="25px";
image1.style.marginLeft="185px";
image1.style.marginTop="100px";
key.appendChild(image1);




}
});



new Ajax.Request("search_python"+"?q="+input_text,{onSuccess:function(request){
document.getElementById('ontology_results').innerHTML="";
$('ontology_results').update(request.responseText);
},

onLoading:function(){
var ont=document.getElementById("ontology_results");
ont.innerHTML=" ";
var image= new Image();
image.src="../images/loading.gif"
image.style.height="25px";
image.style.width="25px";
image.style.marginLeft="195px";
image.style.marginTop="100px";
ont.appendChild(image);
 }
});






return false;

}

</script>
